<!--
 * @LastEditors: wudan01
 * @description: 文件描述
-->
# 接口
> interface

> 类型限制

# 接口使用
#### 定义接口
###### 1. 简单值
> readonly: 只读

> ? : 可选

> [propName: type] 任意属性
```
// 例如
interface Names {
    [x: string]: any;
    [z: number]: number;
}
```

###### 2. 函数
```
interface Lib {
    (): void;
    doSomething(): void;
}
```

> 举例

```
interface Lib {
    (): void;
    version: string;
    doSomething(): void;
}

function getLib() {
    let lib = (() => { }) as Lib
    lib.version = '1.0.0'
    lib.doSomething = () => { }
    return lib;
}
let lib1 = getLib()
lib1()
let lib2 = getLib()
lib2.doSomething()
```

###### 3. 综合举例
```
interface List {
    // 只读属性
    readonly id: number;
    name: string;
    // 任意属性
    [propName: string]: string | number | any;
    // ？可以没有的属性
    age?: number;
}

interface Result {
    // list 类型的数组 
    data: List[]
}
```

#### 接口使用
```
// 限制 result 是 Result 类型
function render(result: Result) {
    result.data.forEach((value) => {
        console.log(value.id, value.name)
        if (value.age) {
            console.log(value.age)
        }
        // value.id++
    })
}
let result = {
    data: [
        { id: 1, name: 'A', sex: 'male' },
        { id: 2, name: 'B', age: 10 }
    ]
}
```

#### 绕过接口限制的方法
###### 1. 字面量赋值变量，变量赋值接口
```
// 限制 render 参数符合 Result  接口规范
function render(result:Result){

}

// 不符合，报错
render({
  a: 123
})

var result = {xxx}

// 不符合 ，不会报错
render(result)

```

###### 2. 类型断言 as
> 手动判断类型符合
```
render({
    data: [
        { id: 1, name: 'A', sex: 'male' },
        { id: 2, name: 'B', age: 10 }
    ]
} as Result)
```
###### 3. 字符串索引签名
```
interface List {
    // 符合 key 为string, 值 类型为 string | number | any 的任意值
    [propName: string]: string | number | any;
}
```
